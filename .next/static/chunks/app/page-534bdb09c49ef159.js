(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2459:(e,t,s)=>{Promise.resolve().then(s.bind(s,7851))},7851:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eq,dynamic:()=>eL});var a=s(5155),r=s(9776);async function l(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(t))}}async function n(e,t,s){let a=await fetch(t,{method:e,headers:s?{"Content-Type":"application/json"}:{},body:s?JSON.stringify(s):void 0,credentials:"include"});return await l(a),a}let i=new(s(4852)).E({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:s}=e,a=await fetch(s[0],{credentials:"include"});return"returnNull"===t&&401===a.status?null:(await l(a),await a.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});var c=s(5894),d=s(2115),o=s(5476),m=s(2885),u=s(5229),x=s(4269);let h=o.Kq,f=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.LM,{ref:t,className:(0,x.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});f.displayName=o.LM.displayName;let p=(0,m.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),g=d.forwardRef((e,t)=>{let{className:s,variant:r,...l}=e;return(0,a.jsx)(o.bL,{ref:t,className:(0,x.cn)(p({variant:r}),s),...l})});g.displayName=o.bL.displayName,d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.rc,{ref:t,className:(0,x.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...r})}).displayName=o.rc.displayName;let y=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.bm,{ref:t,className:(0,x.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...r,children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})});y.displayName=o.bm.displayName;let j=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.hE,{ref:t,className:(0,x.cn)("text-sm font-semibold",s),...r})});j.displayName=o.hE.displayName;let N=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.VY,{ref:t,className:(0,x.cn)("text-sm opacity-90",s),...r})});function v(){let{toasts:e}=(0,c.dj)();return(0,a.jsxs)(h,{children:[e.map(function(e){let{id:t,title:s,description:r,action:l,...n}=e;return(0,a.jsxs)(g,{...n,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&(0,a.jsx)(j,{children:s}),r&&(0,a.jsx)(N,{children:r})]}),l,(0,a.jsx)(y,{})]},t)}),(0,a.jsx)(f,{})]})}N.displayName=o.VY.displayName;var w=s(131),b=s(549);let C=(0,d.createContext)(void 0);function S(e){let{children:t}=e,[s,r]=(0,d.useState)(null),{isLoading:l}=(0,w.I)({queryKey:["/api/auth/status"],queryFn:async()=>{let e=await fetch("/api/auth/status",{credentials:"include"}),t=await e.json();return t.authenticated&&t.user&&r(t.user),t},retry:!1,staleTime:1/0}),c=(0,b.n)({mutationFn:async e=>{let t=await n("POST","/api/auth/login",e);return await t.json()},onSuccess:e=>{r(e),i.invalidateQueries({queryKey:["/api/auth/status"]})}}),o=(0,b.n)({mutationFn:async e=>{let t=await n("POST","/api/auth/register",e);return await t.json()},onSuccess:e=>{r(e),i.invalidateQueries({queryKey:["/api/auth/status"]})}}),m=(0,b.n)({mutationFn:async()=>{await n("POST","/api/auth/logout")},onSuccess:()=>{r(null),i.invalidateQueries()}}),u=async(e,t)=>c.mutateAsync({username:e,password:t}),x=async(e,t,s)=>o.mutateAsync({username:e,email:t,password:s}),h=async()=>m.mutateAsync();return(0,a.jsx)(C.Provider,{value:{user:s,isLoading:l,login:u,register:x,logout:h},children:t})}function A(){let e=(0,d.useContext)(C);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}var k=s(4213),P=s(6948),R=s(6132);function F(){return(0,a.jsx)("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:(0,a.jsx)(P.Zp,{className:"w-full max-w-md mx-4",children:(0,a.jsxs)(P.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex mb-4 gap-2",children:[(0,a.jsx)(R.A,{className:"h-8 w-8 text-red-500"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}let T=function(){let[e,t]=d.useState(void 0);return d.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),s=()=>{t(window.innerWidth<768)};return e.addEventListener("change",s),t(window.innerWidth<768),()=>e.removeEventListener("change",s)},[]),!!e};var L=s(9384),q=s(1169),E=s(9559),M=s(5870),I=s(4926);function z(e){let{user:t,isOpen:s,onToggle:r,activeTab:l,setActiveTab:n}=e,[i,d]=(0,k.zy)(),{logout:o}=A(),m=T(),{toast:u}=(0,c.dj)(),h=async()=>{try{await o(),d("/login")}catch(e){u({title:"Logout failed",description:(null==e?void 0:e.message)||"Failed to log out",variant:"destructive"})}};return m?(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20",onClick:r}),(0,a.jsx)("aside",{className:(0,x.cn)("fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 z-30 transform transition-transform duration-200 ease-in-out",s?"translate-x-0":"-translate-x-full"),children:(0,a.jsx)(V,{user:t,handleLogout:h,activeTab:l,setActiveTab:n})})]}):(0,a.jsx)("aside",{className:"w-64 hidden md:block bg-white border-r border-gray-200 flex-shrink-0",children:(0,a.jsx)(V,{user:t,handleLogout:h,activeTab:l,setActiveTab:n})})}function V(e){let{user:t,handleLogout:s,activeTab:r,setActiveTab:l}=e;return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-16 border-b border-gray-200",children:(0,a.jsx)(k.N_,{href:"/",children:(0,a.jsxs)("a",{className:"text-xl font-semibold text-primary flex items-center",children:[(0,a.jsx)("span",{className:"material-icons mr-2",children:"sync"}),"SocialSync"]})})}),(0,a.jsx)("nav",{className:"flex-1 overflow-y-auto py-4",children:(0,a.jsxs)("ul",{className:"space-y-1 px-3",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,x.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","dashboard"===r?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("dashboard"),children:[(0,a.jsx)(L.A,{className:"mr-3 h-5 w-5 text-current"}),"Dashboard"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,x.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","following"===r?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("following"),children:[(0,a.jsx)(q.A,{className:"mr-3 h-5 w-5 text-current"}),"Following"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,x.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","sync"===r?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("sync"),children:[(0,a.jsx)(E.A,{className:"mr-3 h-5 w-5 text-current"}),"Sync Status"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,x.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","settings"===r?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("settings"),children:[(0,a.jsx)(M.A,{className:"mr-3 h-5 w-5 text-current"}),"Settings"]})})]})}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"material-icons text-gray-500",children:"person"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:t.username}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.email})]}),(0,a.jsx)("button",{type:"button",className:"ml-auto bg-white text-gray-500 hover:text-gray-700",onClick:s,children:(0,a.jsx)(I.A,{className:"h-5 w-5"})})]})})]})}function K(){let{user:e}=A(),t=(0,w.I)({queryKey:["/api/platforms"],queryFn:async()=>(await fetch("/api/platforms")).json(),enabled:!0}),s=(0,w.I)({queryKey:["/api/connections"],queryFn:async()=>{let e=await fetch("/api/connections",{credentials:"include"});return 401===e.status?[]:e.json()},enabled:!!e}),a=(0,b.n)({mutationFn:async e=>(await n("POST","/api/connections/".concat(e,"/connect"))).json(),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/connections"]})}}),r=(0,b.n)({mutationFn:async e=>(await n("POST","/api/connections/".concat(e,"/disconnect"))).json(),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/connections"]})}}),l=async e=>a.mutateAsync(e),c=async e=>r.mutateAsync(e);return{platforms:t.data||[],connections:s.data||[],isLoading:t.isLoading||s.isLoading,connectPlatform:l,isConnecting:a.isPending,disconnectPlatform:c,isDisconnecting:r.isPending}}var O=s(3998);function _(e){let{connection:t}=e,{connectPlatform:s,disconnectPlatform:r}=K(),{toast:l}=(0,c.dj)(),n=async()=>{try{await s(t.platformId),l({title:"Connected",description:"Successfully connected to ".concat(t.platform.name)})}catch(e){l({title:"Connection failed",description:(null==e?void 0:e.message)||"Failed to connect to platform",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"platform-icon text-white h-6 w-6 rounded-full flex items-center justify-center",style:{backgroundColor:t.platform.color},children:(0,a.jsx)("span",{className:"material-icons text-sm",children:t.platform.icon})})}),(0,a.jsxs)("div",{className:"ml-3 w-full",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.platform.name}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.connected?"Connected":"Not connected"}),(0,a.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(t.connected?"bg-green-500":"error"===t.status?"bg-red-500":"bg-gray-400")})]})]})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-5 py-3",children:t.connected?(0,a.jsxs)("div",{className:"text-xs flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Last synced:"}),(0,a.jsx)("span",{className:"text-gray-500",children:t.lastSynced?new Date(t.lastSynced).toLocaleString():"Never"})]}):(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(O.$,{variant:"link",size:"sm",className:"text-xs text-primary font-medium hover:text-blue-600",onClick:n,children:"Connect now"})})})]})}function U(){let{user:e}=A(),[t,s]=(0,d.useState)([]),[a,r]=(0,d.useState)(!1),l=(0,w.I)({queryKey:["/api/following"],queryFn:async()=>{let e=await fetch("/api/following",{credentials:"include"});return 401===e.status?[]:e.json()},enabled:!!e}),c=(0,b.n)({mutationFn:async()=>(await n("POST","/api/sync")).json(),onSuccess:e=>{s(e),r(!0),m()}}),o=(0,b.n)({mutationFn:async()=>(await n("GET","/api/export")).json(),onSuccess:e=>{!function(e,t){let s=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(s);a.setAttribute("href",r),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}([["Username","Display Name","Platform"],...e.data.map(e=>[e.username,e.displayName,e.platform])].map(e=>e.join(",")).join("\n"),"social-sync-export.csv")}}),m=async()=>{if(e)try{let e=await fetch("/api/sync/status",{credentials:"include"}),t=await e.json();s(t),t.every(e=>"completed"===e.status||"failed"===e.status)?(r(!1),i.invalidateQueries({queryKey:["/api/following"]}),i.invalidateQueries({queryKey:["/api/connections"]})):setTimeout(m,2e3)}catch(e){console.error("Error polling sync status:",e),r(!1)}},u=async()=>c.mutateAsync(),x=async()=>o.mutateAsync();return{following:l.data||[],syncData:l.data||[],isLoading:l.isLoading,startSync:u,isSyncing:a,syncProgress:t,exportData:x,isExporting:o.isPending}}var D=s(2944),H=s(2273);let $=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,x.cn)("w-full caption-bottom text-sm",s),...r})})});$.displayName="Table";let Q=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,x.cn)("[&_tr]:border-b",s),...r})});Q.displayName="TableHeader";let W=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,x.cn)("[&_tr:last-child]:border-0",s),...r})});W.displayName="TableBody",d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,x.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let X=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,x.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});X.displayName="TableRow";let Y=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,x.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});Y.displayName="TableHead";let J=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,x.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});J.displayName="TableCell",d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,x.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var B=s(5142),G=s(9975),Z=s(368),ee=s(7937),et=s(88);function es(e){var t,s,r;let{columns:l,data:n,searchColumn:i}=e,[c,o]=d.useState([]),[m,u]=d.useState([]),[x,h]=d.useState({}),[f,p]=d.useState({}),g=(0,D.N4)({data:n,columns:l,getCoreRowModel:(0,H.HT)(),getPaginationRowModel:(0,H.kW)(),onSortingChange:o,getSortedRowModel:(0,H.h5)(),onColumnFiltersChange:u,getFilteredRowModel:(0,H.hM)(),onColumnVisibilityChange:h,onRowSelectionChange:p,state:{sorting:c,columnFilters:m,columnVisibility:x,rowSelection:f}});return(0,a.jsxs)("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[i&&(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)(B.p,{placeholder:"Search by ".concat(i,"..."),value:null!=(r=null==(t=g.getColumn(i))?void 0:t.getFilterValue())?r:"",onChange:e=>{var t;return null==(t=g.getColumn(i))?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)($,{children:[(0,a.jsx)(Q,{children:g.getHeaderGroups().map(e=>(0,a.jsx)(X,{children:e.headers.map(e=>(0,a.jsx)(Y,{children:e.isPlaceholder?null:(0,D.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(W,{children:(null==(s=g.getRowModel().rows)?void 0:s.length)?g.getRowModel().rows.map(e=>(0,a.jsx)(X,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(J,{children:(0,D.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(X,{children:(0,a.jsx)(J,{colSpan:l.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,a.jsx)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200",children:(0,a.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:g.getState().pagination.pageIndex*g.getState().pagination.pageSize+1})," ","to"," ",(0,a.jsx)("span",{className:"font-medium",children:Math.min((g.getState().pagination.pageIndex+1)*g.getState().pagination.pageSize,g.getFilteredRowModel().rows.length)})," ","of ",(0,a.jsx)("span",{className:"font-medium",children:g.getFilteredRowModel().rows.length})," results"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,a.jsxs)(O.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-l-md",onClick:()=>g.setPageIndex(0),disabled:!g.getCanPreviousPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"First"}),(0,a.jsx)(G.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(O.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2",onClick:()=>g.previousPage(),disabled:!g.getCanPreviousPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Previous"}),(0,a.jsx)(Z.A,{className:"h-4 w-4"})]}),(0,a.jsxs)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:["Page ",g.getState().pagination.pageIndex+1," of"," ",g.getPageCount()]}),(0,a.jsxs)(O.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2",onClick:()=>g.nextPage(),disabled:!g.getCanNextPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Next"}),(0,a.jsx)(ee.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(O.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-r-md",onClick:()=>g.setPageIndex(g.getPageCount()-1),disabled:!g.getCanNextPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Last"}),(0,a.jsx)(et.A,{className:"h-4 w-4"})]})]})})]})})]})}var ea=s(7870);let er=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ea.bL,{ref:t,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});er.displayName=ea.bL.displayName;let el=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ea._V,{ref:t,className:(0,x.cn)("aspect-square h-full w-full",s),...r})});el.displayName=ea._V.displayName;let en=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ea.H4,{ref:t,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});en.displayName=ea.H4.displayName;var ei=s(2529),ec=s(8874);function ed(){let{user:e}=A(),{following:t,isLoading:s}=U(),{connections:r}=K(),l=(0,d.useMemo)(()=>{if(!t||0===t.length)return[];let e=new Map;return t.forEach(t=>{e.has(t.username)||e.set(t.username,{username:t.username,displayName:t.displayName||t.username,profilePictureUrl:t.profilePictureUrl,platforms:{}}),e.get(t.username).platforms[t.platform.code]=!0}),Array.from(e.values())},[t]),n=(0,d.useMemo)(()=>r.filter(e=>e.connected).map(e=>({id:e.platform.id,code:e.platform.code,name:e.platform.name,icon:e.platform.icon,color:e.platform.color})),[r]),i=(0,d.useMemo)(()=>{let e=[{accessorKey:"username",header:"Username",cell:e=>{let{row:t}=e,s=t.original;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(er,{className:"h-10 w-10 mr-4",children:[(0,a.jsx)(el,{src:s.profilePictureUrl,alt:s.displayName}),(0,a.jsx)(en,{className:"bg-gray-200",children:s.displayName.substring(0,2).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["@",s.username]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:s.displayName})]})]})}}];return n.forEach(t=>{e.push({id:t.code,header:()=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"platform-icon mx-auto h-6 w-6 rounded-full flex items-center justify-center text-white",style:{backgroundColor:t.color},children:(0,a.jsx)("span",{className:"material-icons text-sm",children:t.icon})}),(0,a.jsx)("span",{className:"block mt-1 text-xs uppercase",children:t.name})]}),cell:e=>{let{row:s}=e,r=s.original.platforms[t.code];return(0,a.jsx)("div",{className:"text-center",children:r?(0,a.jsx)(ei.A,{className:"mx-auto h-5 w-5 text-green-500"}):(0,a.jsx)(ec.A,{className:"mx-auto h-5 w-5 text-gray-300"})})}})}),e.push({id:"actions",header:()=>(0,a.jsx)("div",{className:"text-right",children:"Actions"}),cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(O.$,{variant:"link",className:"text-primary hover:text-primary-dark",children:"View"})})}}),e},[n]);return s?(0,a.jsx)("div",{className:"py-10 text-center",children:"Loading following data..."}):t&&0!==t.length?(0,a.jsx)(es,{columns:i,data:l,searchColumn:"username"}):(0,a.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No following data available. Connect platforms and sync to see your data."})})}var eo=s(4249);let em=d.forwardRef((e,t)=>{let{className:s,value:r,...l}=e;return(0,a.jsx)(eo.bL,{ref:t,className:(0,x.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,a.jsx)(eo.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});function eu(e){let{progress:t}=e,s=t.find(e=>"in_progress"===e.status);if(!s)return null;let r=s.totalItems>0?Math.round(s.itemsProcessed/s.totalItems*100):0;return(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-8",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"material-icons text-blue-400 animate-pulse",children:"sync"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1 md:flex md:justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Syncing your social media following data..."}),(0,a.jsx)("p",{className:"mt-3 text-sm md:mt-0 md:ml-6",children:(0,a.jsxs)("button",{className:"whitespace-nowrap font-medium text-blue-700 hover:text-blue-600",children:["Cancel ",(0,a.jsx)("span",{className:"sr-only",children:"syncing"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)(em,{value:r,className:"h-2 bg-blue-200"}),(0,a.jsxs)("div",{className:"flex justify-between mt-1 text-xs text-blue-700",children:[(0,a.jsxs)("span",{children:[r,"% complete"]}),(0,a.jsxs)("span",{children:["Processing: ",s.platform.name]})]})]})]})}em.displayName=eo.bL.displayName;var ex=s(6999),eh=s(4033),ef=s(2108),ep=s(5917);let eg=ex.bL;ex.YJ;let ey=ex.WT,ej=d.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(ex.l9,{ref:t,className:(0,x.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(ex.In,{asChild:!0,children:(0,a.jsx)(eh.A,{className:"h-4 w-4 opacity-50"})})]})});ej.displayName=ex.l9.displayName;let eN=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ex.PP,{ref:t,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(ef.A,{className:"h-4 w-4"})})});eN.displayName=ex.PP.displayName;let ev=d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ex.wn,{ref:t,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(eh.A,{className:"h-4 w-4"})})});ev.displayName=ex.wn.displayName;let ew=d.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...n}=e;return(0,a.jsx)(ex.ZL,{children:(0,a.jsxs)(ex.UC,{ref:t,className:(0,x.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,a.jsx)(eN,{}),(0,a.jsx)(ex.LM,{className:(0,x.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(ev,{})]})})});ew.displayName=ex.UC.displayName,d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ex.JU,{ref:t,className:(0,x.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=ex.JU.displayName;let eb=d.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(ex.q7,{ref:t,className:(0,x.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ex.VF,{children:(0,a.jsx)(ep.A,{className:"h-4 w-4"})})}),(0,a.jsx)(ex.p4,{children:r})]})});eb.displayName=ex.q7.displayName,d.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ex.wv,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=ex.wv.displayName;var eC=s(6651),eS=s(3581);function eA(){let[e,t]=(0,d.useState)(""),[s,r]=(0,d.useState)("all"),[l,n]=(0,d.useState)("all");return(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0",children:[(0,a.jsxs)("div",{className:"relative rounded-md shadow-sm max-w-xs",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(eC.A,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)(B.p,{type:"text",placeholder:"Search by username",className:"pl-10 pr-12",value:e,onChange:e=>t(e.target.value)}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,a.jsxs)(eg,{value:s,onValueChange:r,children:[(0,a.jsx)(ej,{className:"border-0 focus:ring-0 py-0 h-full",children:(0,a.jsx)(ey,{placeholder:"All"})}),(0,a.jsxs)(ew,{children:[(0,a.jsx)(eb,{value:"all",children:"All"}),(0,a.jsx)(eb,{value:"instagram",children:"Instagram"}),(0,a.jsx)(eb,{value:"twitter",children:"Twitter/X"}),(0,a.jsx)(eb,{value:"facebook",children:"Facebook"})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Show:"}),(0,a.jsxs)(eg,{value:l,onValueChange:n,children:[(0,a.jsx)(ej,{className:"w-[200px]",children:(0,a.jsx)(ey,{placeholder:"All accounts"})}),(0,a.jsxs)(ew,{children:[(0,a.jsx)(eb,{value:"all",children:"All accounts"}),(0,a.jsx)(eb,{value:"multiple",children:"Connected to multiple platforms"}),(0,a.jsx)(eb,{value:"single",children:"Connected to only one platform"})]})]}),(0,a.jsxs)(O.$,{variant:"outline",size:"sm",className:"flex items-center",children:[(0,a.jsx)(eS.A,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]})})}var ek=s(3406),eP=s(7676);function eR(){let[e,t]=(0,k.zy)(),{user:s,isLoading:r}=A(),{toast:l}=(0,c.dj)(),n=T(),[i,o]=(0,d.useState)(!n),[m,u]=(0,d.useState)("following"),{connections:x,isLoading:h}=K(),{syncData:f,startSync:p,isSyncing:g,syncProgress:y,exportData:j,isExporting:N}=U();(0,d.useEffect)(()=>{r||s||t("/login")},[s,r,t]);let v=async()=>{try{await p(),l({title:"Sync started",description:"Your social media data is being synchronized."})}catch(e){l({title:"Sync failed",description:(null==e?void 0:e.message)||"Failed to start synchronization.",variant:"destructive"})}},w=async()=>{try{await j(),l({title:"Export successful",description:"Your data has been prepared for download."})}catch(e){l({title:"Export failed",description:(null==e?void 0:e.message)||"Failed to export data.",variant:"destructive"})}};return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):s?(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,a.jsx)(z,{user:s,isOpen:i,onToggle:()=>o(!i),activeTab:m,setActiveTab:u}),n&&(0,a.jsx)("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4",children:[(0,a.jsx)("button",{type:"button",className:"text-gray-600",onClick:()=>o(!i),children:(0,a.jsx)("span",{className:"material-icons",children:"menu"})}),(0,a.jsxs)("span",{className:"text-xl font-semibold text-primary flex items-center",children:[(0,a.jsx)("span",{className:"material-icons mr-2",children:"sync"}),"SocialSync"]}),(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"material-icons text-gray-500",children:"person"})})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto pt-16 md:pt-0",children:(0,a.jsxs)("div",{className:"px-4 py-4 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-6 md:flex md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Social Media Following Dashboard"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Sync and manage all your social media connections in one place"})]}),(0,a.jsxs)("div",{className:"mt-4 md:mt-0 flex",children:[(0,a.jsxs)(O.$,{onClick:v,disabled:g||0===x.length,children:[(0,a.jsx)(E.A,{className:"mr-2 h-4 w-4"}),"Sync Now"]}),(0,a.jsxs)(O.$,{variant:"outline",className:"ml-3",onClick:w,disabled:N||0===f.length,children:[(0,a.jsx)(eP.A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 mb-8",children:x.map(e=>(0,a.jsx)(_,{connection:e},e.id))}),g&&(null==y?void 0:y.length)>0&&(0,a.jsx)(eu,{progress:y}),(0,a.jsxs)(ek.tU,{defaultValue:"following",className:"mb-6",children:[(0,a.jsxs)(ek.j7,{children:[(0,a.jsxs)(ek.Xi,{value:"following",className:"flex items-center",children:[(0,a.jsx)("span",{className:"material-icons text-sm mr-2",children:"people_outline"}),"Following Table"]}),(0,a.jsxs)(ek.Xi,{value:"analytics",className:"flex items-center",children:[(0,a.jsx)("span",{className:"material-icons text-sm mr-2",children:"insights"}),"Analytics"]}),(0,a.jsxs)(ek.Xi,{value:"history",className:"flex items-center",children:[(0,a.jsx)("span",{className:"material-icons text-sm mr-2",children:"history"}),"Sync History"]})]}),(0,a.jsxs)(ek.av,{value:"following",className:"mt-6",children:[(0,a.jsx)(eA,{}),(0,a.jsx)(ed,{})]}),(0,a.jsx)(ek.av,{value:"analytics",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Analytics Coming Soon"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"We're working on building analytics features to help you understand your social media following patterns."})]})}),(0,a.jsx)(ek.av,{value:"history",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sync History"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"View your recent sync operations and their status."}),(0,a.jsx)("div",{className:"mt-4",children:y.length>0?(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:y.map(e=>(0,a.jsx)("li",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-white ".concat(e.platform.color?"bg-[".concat(e.platform.color,"]"):"bg-gray-500"),children:(0,a.jsx)("span",{className:"material-icons text-sm",children:e.platform.icon})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.platform.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"completed"===e.status?"Completed":"in_progress"===e.status?"In Progress":"failed"===e.status?"Failed":"Pending"})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.startTime?new Date(e.startTime).toLocaleString():"N/A"})]})},e.id))}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No sync history available"})})]})})]})]})})]}):null}var eF=s(8182);function eT(){return(0,a.jsxs)(k.dO,{children:[(0,a.jsx)(k.qh,{path:"/",component:eR}),(0,a.jsx)(k.qh,{path:"/login",component:eF.A}),(0,a.jsx)(k.qh,{component:F})]})}let eL="force-dynamic";function eq(){return(0,a.jsx)(r.Ht,{client:i,children:(0,a.jsxs)(S,{children:[(0,a.jsx)(eT,{}),(0,a.jsx)(v,{})]})})}}},e=>{e.O(0,[554,767,182,441,255,358],()=>e(e.s=2459)),_N_E=e.O()}]);
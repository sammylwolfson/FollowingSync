(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{203:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>o,av:()=>d,j7:()=>c,tU:()=>i});var a=t(7876),n=t(4232),r=t(7654),l=t(6680);let i=r.bL,c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.B8,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});c.displayName=r.B8.displayName;let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.l9,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});o.displayName=r.l9.displayName;let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.UC,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});d.displayName=r.UC.displayName},1164:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard",function(){return t(7406)}])},3579:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var a=t(4232);let n=0,r=new Map,l=e=>{if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,s)},i=[],c={toasts:[]};function o(e){c=((e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}})(c,e),i.forEach(e=>{e(c)})}function d(e){let{...s}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(c);return a.useEffect(()=>(i.push(s),()=>{let e=i.indexOf(s);e>-1&&i.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},6283:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var a=t(7876),n=t(4232),r=t(2987),l=t(4650),i=t(6680);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,s)=>{let{className:t,variant:n,size:l,asChild:o=!1,...d}=e,m=o?r.DX:"button";return(0,a.jsx)(m,{className:(0,i.cn)(c({variant:n,size:l,className:t})),ref:s,...d})});o.displayName="Button"},6625:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(7876),n=t(4232),r=t(6680);let l=n.forwardRef((e,s)=>{let{className:t,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});l.displayName="Input"},6680:(e,s,t)=>{"use strict";t.d(s,{cn:()=>r});var a=t(9241),n=t(9573);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,a.$)(s))}},7406:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ex});var a=t(7876),n=t(4232),r=t(1186);async function l(e){if(!e.ok){let s=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(s))}}async function i(e,s,t){let a=await fetch(s,{method:e,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await l(a),a}let c=new(t(948)).E({defaultOptions:{queries:{queryFn:(e=>{let{on401:s}=e;return async e=>{let{queryKey:t}=e,a=await fetch(t[0],{credentials:"include"});return"returnNull"===s&&401===a.status?null:(await l(a),await a.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),o=(0,n.createContext)(void 0);function d(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}let m=function(){let[e,s]=n.useState(void 0);return n.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),t=()=>{s(window.innerWidth<768)};return e.addEventListener("change",t),s(window.innerWidth<768),()=>e.removeEventListener("change",t)},[]),!!e};var u=t(6680),x=t(3579),f=t(4113),h=t(9674),p=t(9878),g=t(9903),y=t(49);function j(e){let{user:s,isOpen:t,onToggle:n,activeTab:l,setActiveTab:i}=e,[c,o]=(0,r.zy)(),{logout:f}=d(),h=m(),{toast:p}=(0,x.dj)(),g=async()=>{try{await f(),o("/login")}catch(e){p({title:"Logout failed",description:(null==e?void 0:e.message)||"Failed to log out",variant:"destructive"})}};return h?(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20",onClick:n}),(0,a.jsx)("aside",{className:(0,u.cn)("fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 z-30 transform transition-transform duration-200 ease-in-out",t?"translate-x-0":"-translate-x-full"),children:(0,a.jsx)(N,{user:s,handleLogout:g,activeTab:l,setActiveTab:i})})]}):(0,a.jsx)("aside",{className:"w-64 hidden md:block bg-white border-r border-gray-200 flex-shrink-0",children:(0,a.jsx)(N,{user:s,handleLogout:g,activeTab:l,setActiveTab:i})})}function N(e){let{user:s,handleLogout:t,activeTab:n,setActiveTab:l}=e;return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-16 border-b border-gray-200",children:(0,a.jsx)(r.N_,{href:"/",children:(0,a.jsxs)("a",{className:"text-xl font-semibold text-primary flex items-center",children:[(0,a.jsx)("span",{className:"material-icons mr-2",children:"sync"}),"SocialSync"]})})}),(0,a.jsx)("nav",{className:"flex-1 overflow-y-auto py-4",children:(0,a.jsxs)("ul",{className:"space-y-1 px-3",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,u.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","dashboard"===n?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("dashboard"),children:[(0,a.jsx)(f.A,{className:"mr-3 h-5 w-5 text-current"}),"Dashboard"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,u.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","following"===n?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("following"),children:[(0,a.jsx)(h.A,{className:"mr-3 h-5 w-5 text-current"}),"Following"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,u.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","sync"===n?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("sync"),children:[(0,a.jsx)(p.A,{className:"mr-3 h-5 w-5 text-current"}),"Sync Status"]})}),(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:"#",className:(0,u.cn)("flex items-center px-4 py-2 text-sm font-medium rounded-md","settings"===n?"bg-primary bg-opacity-10 text-primary":"text-gray-700 hover:bg-gray-100"),onClick:()=>l("settings"),children:[(0,a.jsx)(g.A,{className:"mr-3 h-5 w-5 text-current"}),"Settings"]})})]})}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"material-icons text-gray-500",children:"person"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:s.username}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:s.email})]}),(0,a.jsx)("button",{type:"button",className:"ml-auto bg-white text-gray-500 hover:text-gray-700",onClick:t,children:(0,a.jsx)(y.A,{className:"h-5 w-5"})})]})})]})}var v=t(1196),b=t(97);function w(){let{user:e}=d(),s=(0,v.I)({queryKey:["/api/platforms"],queryFn:async()=>(await fetch("/api/platforms")).json(),enabled:!0}),t=(0,v.I)({queryKey:["/api/connections"],queryFn:async()=>{let e=await fetch("/api/connections",{credentials:"include"});return 401===e.status?[]:e.json()},enabled:!!e}),a=(0,b.n)({mutationFn:async e=>(await i("POST","/api/connections/".concat(e,"/connect"))).json(),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/connections"]})}}),n=(0,b.n)({mutationFn:async e=>(await i("POST","/api/connections/".concat(e,"/disconnect"))).json(),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/connections"]})}}),r=async e=>a.mutateAsync(e),l=async e=>n.mutateAsync(e);return{platforms:s.data||[],connections:t.data||[],isLoading:s.isLoading||t.isLoading,connectPlatform:r,isConnecting:a.isPending,disconnectPlatform:l,isDisconnecting:n.isPending}}var S=t(6283);function C(e){let{connection:s}=e,{connectPlatform:t,disconnectPlatform:n}=w(),{toast:r}=(0,x.dj)(),l=async()=>{try{await t(s.platformId),r({title:"Connected",description:"Successfully connected to ".concat(s.platform.name)})}catch(e){r({title:"Connection failed",description:(null==e?void 0:e.message)||"Failed to connect to platform",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"platform-icon text-white h-6 w-6 rounded-full flex items-center justify-center",style:{backgroundColor:s.platform.color},children:(0,a.jsx)("span",{className:"material-icons text-sm",children:s.platform.icon})})}),(0,a.jsxs)("div",{className:"ml-3 w-full",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:s.platform.name}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:s.connected?"Connected":"Not connected"}),(0,a.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(s.connected?"bg-green-500":"error"===s.status?"bg-red-500":"bg-gray-400")})]})]})]})}),(0,a.jsx)("div",{className:"bg-gray-50 px-5 py-3",children:s.connected?(0,a.jsxs)("div",{className:"text-xs flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Last synced:"}),(0,a.jsx)("span",{className:"text-gray-500",children:s.lastSynced?new Date(s.lastSynced).toLocaleString():"Never"})]}):(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(S.$,{variant:"link",size:"sm",className:"text-xs text-primary font-medium hover:text-blue-600",onClick:l,children:"Connect now"})})})]})}function A(){let{user:e}=d(),[s,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!1),l=(0,v.I)({queryKey:["/api/following"],queryFn:async()=>{let e=await fetch("/api/following",{credentials:"include"});return 401===e.status?[]:e.json()},enabled:!!e}),o=(0,b.n)({mutationFn:async()=>(await i("POST","/api/sync")).json(),onSuccess:e=>{t(e),r(!0),u()}}),m=(0,b.n)({mutationFn:async()=>(await i("GET","/api/export")).json(),onSuccess:e=>{!function(e,s){let t=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),n=URL.createObjectURL(t);a.setAttribute("href",n),a.setAttribute("download",s),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}([["Username","Display Name","Platform"],...e.data.map(e=>[e.username,e.displayName,e.platform])].map(e=>e.join(",")).join("\n"),"social-sync-export.csv")}}),u=async()=>{if(e)try{let e=await fetch("/api/sync/status",{credentials:"include"}),s=await e.json();t(s),s.every(e=>"completed"===e.status||"failed"===e.status)?(r(!1),c.invalidateQueries({queryKey:["/api/following"]}),c.invalidateQueries({queryKey:["/api/connections"]})):setTimeout(u,2e3)}catch(e){console.error("Error polling sync status:",e),r(!1)}},x=async()=>o.mutateAsync(),f=async()=>m.mutateAsync();return{following:l.data||[],syncData:l.data||[],isLoading:l.isLoading,startSync:x,isSyncing:a,syncProgress:s,exportData:f,isExporting:m.isPending}}var T=t(7459),k=t(2653);let P=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,u.cn)("w-full caption-bottom text-sm",t),...n})})});P.displayName="Table";let R=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:s,className:(0,u.cn)("[&_tr]:border-b",t),...n})});R.displayName="TableHeader";let _=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,u.cn)("[&_tr:last-child]:border-0",t),...n})});_.displayName="TableBody",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let E=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:s,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});E.displayName="TableRow";let F=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:s,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});F.displayName="TableHead";let I=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:s,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});I.displayName="TableCell",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:s,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption";var L=t(6625),M=t(632),O=t(4937),D=t(3738),z=t(6725);function U(e){var s,t,r;let{columns:l,data:i,searchColumn:c}=e,[o,d]=n.useState([]),[m,u]=n.useState([]),[x,f]=n.useState({}),[h,p]=n.useState({}),g=(0,T.N4)({data:i,columns:l,getCoreRowModel:(0,k.HT)(),getPaginationRowModel:(0,k.kW)(),onSortingChange:d,getSortedRowModel:(0,k.h5)(),onColumnFiltersChange:u,getFilteredRowModel:(0,k.hM)(),onColumnVisibilityChange:f,onRowSelectionChange:p,state:{sorting:o,columnFilters:m,columnVisibility:x,rowSelection:h}});return(0,a.jsxs)("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[c&&(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsx)(L.p,{placeholder:"Search by ".concat(c,"..."),value:null!=(r=null==(s=g.getColumn(c))?void 0:s.getFilterValue())?r:"",onChange:e=>{var s;return null==(s=g.getColumn(c))?void 0:s.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(P,{children:[(0,a.jsx)(R,{children:g.getHeaderGroups().map(e=>(0,a.jsx)(E,{children:e.headers.map(e=>(0,a.jsx)(F,{children:e.isPlaceholder?null:(0,T.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(_,{children:(null==(t=g.getRowModel().rows)?void 0:t.length)?g.getRowModel().rows.map(e=>(0,a.jsx)(E,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(I,{children:(0,T.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(E,{children:(0,a.jsx)(I,{colSpan:l.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,a.jsx)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200",children:(0,a.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:g.getState().pagination.pageIndex*g.getState().pagination.pageSize+1})," ","to"," ",(0,a.jsx)("span",{className:"font-medium",children:Math.min((g.getState().pagination.pageIndex+1)*g.getState().pagination.pageSize,g.getFilteredRowModel().rows.length)})," ","of ",(0,a.jsx)("span",{className:"font-medium",children:g.getFilteredRowModel().rows.length})," results"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,a.jsxs)(S.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-l-md",onClick:()=>g.setPageIndex(0),disabled:!g.getCanPreviousPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"First"}),(0,a.jsx)(M.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(S.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2",onClick:()=>g.previousPage(),disabled:!g.getCanPreviousPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Previous"}),(0,a.jsx)(O.A,{className:"h-4 w-4"})]}),(0,a.jsxs)("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:["Page ",g.getState().pagination.pageIndex+1," of"," ",g.getPageCount()]}),(0,a.jsxs)(S.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2",onClick:()=>g.nextPage(),disabled:!g.getCanNextPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Next"}),(0,a.jsx)(D.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(S.$,{variant:"outline",className:"relative inline-flex items-center px-2 py-2 rounded-r-md",onClick:()=>g.setPageIndex(g.getPageCount()-1),disabled:!g.getCanNextPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Last"}),(0,a.jsx)(z.A,{className:"h-4 w-4"})]})]})})]})})]})}var q=t(8194);let V=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(q.bL,{ref:s,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n})});V.displayName=q.bL.displayName;let $=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(q._V,{ref:s,className:(0,u.cn)("aspect-square h-full w-full",t),...n})});$.displayName=q._V.displayName;let K=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(q.H4,{ref:s,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n})});K.displayName=q.H4.displayName;var X=t(9240),H=t(3739);function W(){let{user:e}=d(),{following:s,isLoading:t}=A(),{connections:r}=w(),l=(0,n.useMemo)(()=>{if(!s||0===s.length)return[];let e=new Map;return s.forEach(s=>{e.has(s.username)||e.set(s.username,{username:s.username,displayName:s.displayName||s.username,profilePictureUrl:s.profilePictureUrl,platforms:{}}),e.get(s.username).platforms[s.platform.code]=!0}),Array.from(e.values())},[s]),i=(0,n.useMemo)(()=>r.filter(e=>e.connected).map(e=>({id:e.platform.id,code:e.platform.code,name:e.platform.name,icon:e.platform.icon,color:e.platform.color})),[r]),c=(0,n.useMemo)(()=>{let e=[{accessorKey:"username",header:"Username",cell:e=>{let{row:s}=e,t=s.original;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(V,{className:"h-10 w-10 mr-4",children:[(0,a.jsx)($,{src:t.profilePictureUrl,alt:t.displayName}),(0,a.jsx)(K,{className:"bg-gray-200",children:t.displayName.substring(0,2).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["@",t.username]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:t.displayName})]})]})}}];return i.forEach(s=>{e.push({id:s.code,header:()=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"platform-icon mx-auto h-6 w-6 rounded-full flex items-center justify-center text-white",style:{backgroundColor:s.color},children:(0,a.jsx)("span",{className:"material-icons text-sm",children:s.icon})}),(0,a.jsx)("span",{className:"block mt-1 text-xs uppercase",children:s.name})]}),cell:e=>{let{row:t}=e,n=t.original.platforms[s.code];return(0,a.jsx)("div",{className:"text-center",children:n?(0,a.jsx)(X.A,{className:"mx-auto h-5 w-5 text-green-500"}):(0,a.jsx)(H.A,{className:"mx-auto h-5 w-5 text-gray-300"})})}})}),e.push({id:"actions",header:()=>(0,a.jsx)("div",{className:"text-right",children:"Actions"}),cell:e=>{let{row:s}=e;return(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(S.$,{variant:"link",className:"text-primary hover:text-primary-dark",children:"View"})})}}),e},[i]);return t?(0,a.jsx)("div",{className:"py-10 text-center",children:"Loading following data..."}):s&&0!==s.length?(0,a.jsx)(U,{columns:c,data:l,searchColumn:"username"}):(0,a.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No following data available. Connect platforms and sync to see your data."})})}var B=t(2202);let Q=n.forwardRef((e,s)=>{let{className:t,value:n,...r}=e;return(0,a.jsx)(B.bL,{ref:s,className:(0,u.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:(0,a.jsx)(B.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});function J(e){let{progress:s}=e,t=s.find(e=>"in_progress"===e.status);if(!t)return null;let n=t.totalItems>0?Math.round(t.itemsProcessed/t.totalItems*100):0;return(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-8",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"material-icons text-blue-400 animate-pulse",children:"sync"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1 md:flex md:justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Syncing your social media following data..."}),(0,a.jsx)("p",{className:"mt-3 text-sm md:mt-0 md:ml-6",children:(0,a.jsxs)("button",{className:"whitespace-nowrap font-medium text-blue-700 hover:text-blue-600",children:["Cancel ",(0,a.jsx)("span",{className:"sr-only",children:"syncing"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)(Q,{value:n,className:"h-2 bg-blue-200"}),(0,a.jsxs)("div",{className:"flex justify-between mt-1 text-xs text-blue-700",children:[(0,a.jsxs)("span",{children:[n,"% complete"]}),(0,a.jsxs)("span",{children:["Processing: ",t.platform.name]})]})]})]})}Q.displayName=B.bL.displayName;var G=t(1633),Y=t(5316),Z=t(8129),ee=t(458);let es=G.bL;G.YJ;let et=G.WT,ea=n.forwardRef((e,s)=>{let{className:t,children:n,...r}=e;return(0,a.jsxs)(G.l9,{ref:s,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[n,(0,a.jsx)(G.In,{asChild:!0,children:(0,a.jsx)(Y.A,{className:"h-4 w-4 opacity-50"})})]})});ea.displayName=G.l9.displayName;let en=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.PP,{ref:s,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(Z.A,{className:"h-4 w-4"})})});en.displayName=G.PP.displayName;let er=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.wn,{ref:s,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(Y.A,{className:"h-4 w-4"})})});er.displayName=G.wn.displayName;let el=n.forwardRef((e,s)=>{let{className:t,children:n,position:r="popper",...l}=e;return(0,a.jsx)(G.ZL,{children:(0,a.jsxs)(G.UC,{ref:s,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...l,children:[(0,a.jsx)(en,{}),(0,a.jsx)(G.LM,{className:(0,u.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(er,{})]})})});el.displayName=G.UC.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.JU,{ref:s,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})}).displayName=G.JU.displayName;let ei=n.forwardRef((e,s)=>{let{className:t,children:n,...r}=e;return(0,a.jsxs)(G.q7,{ref:s,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(G.VF,{children:(0,a.jsx)(ee.A,{className:"h-4 w-4"})})}),(0,a.jsx)(G.p4,{children:n})]})});ei.displayName=G.q7.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.wv,{ref:s,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=G.wv.displayName;var ec=t(7734),eo=t(7071);function ed(){let[e,s]=(0,n.useState)(""),[t,r]=(0,n.useState)("all"),[l,i]=(0,n.useState)("all");return(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0",children:[(0,a.jsxs)("div",{className:"relative rounded-md shadow-sm max-w-xs",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(ec.A,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)(L.p,{type:"text",placeholder:"Search by username",className:"pl-10 pr-12",value:e,onChange:e=>s(e.target.value)}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,a.jsxs)(es,{value:t,onValueChange:r,children:[(0,a.jsx)(ea,{className:"border-0 focus:ring-0 py-0 h-full",children:(0,a.jsx)(et,{placeholder:"All"})}),(0,a.jsxs)(el,{children:[(0,a.jsx)(ei,{value:"all",children:"All"}),(0,a.jsx)(ei,{value:"instagram",children:"Instagram"}),(0,a.jsx)(ei,{value:"twitter",children:"Twitter/X"}),(0,a.jsx)(ei,{value:"facebook",children:"Facebook"})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Show:"}),(0,a.jsxs)(es,{value:l,onValueChange:i,children:[(0,a.jsx)(ea,{className:"w-[200px]",children:(0,a.jsx)(et,{placeholder:"All accounts"})}),(0,a.jsxs)(el,{children:[(0,a.jsx)(ei,{value:"all",children:"All accounts"}),(0,a.jsx)(ei,{value:"multiple",children:"Connected to multiple platforms"}),(0,a.jsx)(ei,{value:"single",children:"Connected to only one platform"})]})]}),(0,a.jsxs)(S.$,{variant:"outline",size:"sm",className:"flex items-center",children:[(0,a.jsx)(eo.A,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]})})}var em=t(203),eu=t(5203);function ex(){let[e,s]=(0,r.zy)(),{user:t,isLoading:l}=d(),{toast:i}=(0,x.dj)(),c=m(),[o,u]=(0,n.useState)(!c),[f,h]=(0,n.useState)("following"),{connections:g,isLoading:y}=w(),{syncData:N,startSync:v,isSyncing:b,syncProgress:T,exportData:k,isExporting:P}=A();(0,n.useEffect)(()=>{l||t||s("/login")},[t,l,s]);let R=async()=>{try{await v(),i({title:"Sync started",description:"Your social media data is being synchronized."})}catch(e){i({title:"Sync failed",description:(null==e?void 0:e.message)||"Failed to start synchronization.",variant:"destructive"})}},_=async()=>{try{await k(),i({title:"Export successful",description:"Your data has been prepared for download."})}catch(e){i({title:"Export failed",description:(null==e?void 0:e.message)||"Failed to export data.",variant:"destructive"})}};return l?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):t?(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,a.jsx)(j,{user:t,isOpen:o,onToggle:()=>u(!o),activeTab:f,setActiveTab:h}),c&&(0,a.jsx)("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4",children:[(0,a.jsx)("button",{type:"button",className:"text-gray-600",onClick:()=>u(!o),children:(0,a.jsx)("span",{className:"material-icons",children:"menu"})}),(0,a.jsxs)("span",{className:"text-xl font-semibold text-primary flex items-center",children:[(0,a.jsx)("span",{className:"material-icons mr-2",children:"sync"}),"SocialSync"]}),(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"material-icons text-gray-500",children:"person"})})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto pt-16 md:pt-0",children:(0,a.jsxs)("div",{className:"px-4 py-4 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-6 md:flex md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Social Media Following Dashboard"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Sync and manage all your social media connections in one place"})]}),(0,a.jsxs)("div",{className:"mt-4 md:mt-0 flex",children:[(0,a.jsxs)(S.$,{onClick:R,disabled:b||0===g.length,children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Sync Now"]}),(0,a.jsxs)(S.$,{variant:"outline",className:"ml-3",onClick:_,disabled:P||0===N.length,children:[(0,a.jsx)(eu.A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 mb-8",children:g.map(e=>(0,a.jsx)(C,{connection:e},e.id))}),b&&(null==T?void 0:T.length)>0&&(0,a.jsx)(J,{progress:T}),(0,a.jsxs)(em.tU,{defaultValue:"following",className:"mb-6",children:[(0,a.jsxs)(em.j7,{children:[(0,a.jsxs)(em.Xi,{value:"following",className:"flex items-center",children:[(0,a.jsx)("span",{className:"material-icons text-sm mr-2",children:"people_outline"}),"Following Table"]}),(0,a.jsxs)(em.Xi,{value:"analytics",className:"flex items-center",children:[(0,a.jsx)("span",{className:"material-icons text-sm mr-2",children:"insights"}),"Analytics"]}),(0,a.jsxs)(em.Xi,{value:"history",className:"flex items-center",children:[(0,a.jsx)("span",{className:"material-icons text-sm mr-2",children:"history"}),"Sync History"]})]}),(0,a.jsxs)(em.av,{value:"following",className:"mt-6",children:[(0,a.jsx)(ed,{}),(0,a.jsx)(W,{})]}),(0,a.jsx)(em.av,{value:"analytics",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Analytics Coming Soon"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"We're working on building analytics features to help you understand your social media following patterns."})]})}),(0,a.jsx)(em.av,{value:"history",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sync History"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"View your recent sync operations and their status."}),(0,a.jsx)("div",{className:"mt-4",children:T.length>0?(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:T.map(e=>(0,a.jsx)("li",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-white ".concat(e.platform.color?"bg-[".concat(e.platform.color,"]"):"bg-gray-500"),children:(0,a.jsx)("span",{className:"material-icons text-sm",children:e.platform.icon})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.platform.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"completed"===e.status?"Completed":"in_progress"===e.status?"In Progress":"failed"===e.status?"Failed":"Pending"})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.startTime?new Date(e.startTime).toLocaleString():"N/A"})]})},e.id))}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No sync history available"})})]})})]})]})})]}):null}}},e=>{e.O(0,[749,11,315,636,593,792],()=>e(e.s=1164)),_N_E=e.O()}]);